# Frontend-спецификация для Chaos Organizer

## Обзор проекта

Chaos Organizer — это бот-органайзер для хранения информации, поиска и сервисов, вдохновлённый функциональностью мессенджеров (Telegram, WhatsApp, Slack). Клиентская часть реализует интерфейс, аналогичный современным мессенджерам, и предоставляет пользователю все необходимые функции для работы с контентом.

## Визуальное оформление

### Дизайн-система
- Интерфейс должен быть интуитивно понятен для пользователей, знакомых с Telegram, WhatsApp или Slack.
- Рекомендуется использовать схожие цветовые палитры, расположение элементов и иконографику.
- Адаптивный дизайн, поддерживающий работу на десктопах, планшетах и мобильных устройствах.

### Компоненты интерфейса
1. **Список сообщений** – основная область чата с лентой сообщений.
2. **Панель ввода** – поле для текста, кнопки загрузки файлов, эмодзи, отправки голосовых сообщений.
3. **Боковое меню** – навигация по категориям вложений (аудио, видео, изображения, другие файлы), избранное, настройки.
4. **Панель поиска** – строка поиска по истории сообщений.
5. **Окно предпросмотра файлов** – модальное окно для просмотра изображений, видео, аудио.
6. **Уведомления** – системные уведомления через Notification API для напоминаний.

## Технологический стек

### Обязательные инструменты
- **Сборка:** Webpack (с поддержкой hot module replacement для разработки)
- **Транспиляция:** Babel (для поддержки современного JavaScript в старых браузерах)
- **Линтинг:** ESLint (конфигурация airbnb или custom)
- **CI/CD:** GitHub Actions (для автоматического развёртывания на GitHub Pages)

### Дополнительные библиотеки (рекомендуемые)
- **Стилизация:** CSS
- **Работа с медиа:** библиотеки для записи видео/аудио (например, `recordrtc`), воспроизведения (`video.js`, `howler.js`)
- **Обработка файлов:** `dropzone` для Drag & Drop, `file-saver` для скачивания, `zip.js` для архивирования
- **Шифрование:** `crypto-js` для шифрования/дешифрования на стороне клиента
- **Подсветка кода:** `highlight.js` или `prism.js`
- **Эмодзи:** кастомный компонент

## Ключевые функции (клиентская реализация)

Все перечисленные функции являются основными и должны быть реализованы в клиентской части.

### Основные функции интерфейса
1. **Отправка и отображение сообщений**
   - Текстовые сообщения с поддержкой переноса строк.
   - Ссылки (`http://`, `https://`) автоматически определяются и рендерятся как кликабельные `<a>`.
   - Поддержка эмодзи (встроенный picker или автодополнение).

2. **Загрузка файлов**
   - Drag & Drop области для загрузки изображений, видео, аудио и других файлов.
   - Кнопка «Прикрепить файл» с выбором из файловой системы.
   - Индикатор прогресса загрузки.

3. **Скачивание файлов**
   - Каждое прикреплённое сообщение должно иметь кнопку скачивания.
   - Файлы скачиваются на компьютер пользователя с оригинальным именем.

4. **Ленивая подгрузка (infinite scroll)**
   - Первоначально загружаются последние 10 сообщений.
   - При прокрутке вверх автоматически подгружаются следующие 10 сообщений.
   - Индикатор загрузки (спиннер) во время подгрузки.

5. **Синхронизация между вкладками**
   - Использование WebSocket или Server-Sent Events для мгновенного обновления всех открытых экземпляров приложения.
   - При изменении данных в одной вкладке остальные вкладки должны получить уведомление и обновиться.

### Расширенные возможности
6. **Поиск по сообщениям**
   - Интерфейс с полем ввода и фильтрами по типу контента.
   - Результаты отображаются в отдельной панели.

7. **Запись видео и аудио**
   - Использование MediaRecorder API для записи непосредственно в браузере с предпросмотром и отправкой в чат.

8. **Отправка геолокации**
   - Интеграция с Geolocation API для отправки текущих координат в виде карты или текстовой ссылки.

9. **Воспроизведение видео/аудио**
   - Встроенный плеер для просмотра/прослушивания медиафайлов без скачивания.

10. **Установка напоминаний**
    - Команда `@schedule: 18:04 31.08.2019 «Последний день лета»` создаёт напоминание; по истечении времени срабатывает Notification API.

11. **Команды боту**
    - Интерфейс ввода команд вида `@chaos: погода`; ответ бота отображается в виде сообщения.

12. **Закрепление сообщений**
    - Возможность закрепить одно сообщение в верхней части чата (визуально выделяется).

13. **Добавление в избранное**
    - Кнопка «звезда» у каждого сообщения; отдельный раздел для просмотра избранного.

14. **Просмотр вложений по категориям**
    - Боковое меню с фильтрами: аудио, видео, изображения, другие файлы.

15. **Офлайн-режим**
    - Использование Service Workers для кеширования истории; при отсутствии сети показывать закешированные данные.

16. **Экспорт/импорт истории**
    - Кнопка «Экспорт» для скачивания архива с историей; «Импорт» для загрузки архива и восстановления чата.

17. **Шифрование сообщений**
    - Интерфейс ввода пароля перед отправкой зашифрованного сообщения; расшифровка при получении (требуется ввод пароля).

18. **Архивирование файлов**
    - Возможность выбрать несколько файлов и упаковать их в ZIP перед отправкой (с использованием zip.js).

19. **Поддержка оформления кода**
    - Сообщения, обёрнутые в тройные backticks, автоматически подсвечиваются синтаксисом (highlight.js).

20. **Поддержка смайликов и стикеров**
    - Панель выбора смайликов, возможность загрузки кастомных стикеров.

## Структура проекта (пример)

```
src/
├── assets/           # Статические ресурсы (иконки, изображения, стикеры)
├── components/       # Переиспользуемые UI-компоненты
│   ├── Message/
│   ├── InputPanel/
│   ├── Sidebar/
│   └── ...
├── pages/            # Страницы (если SPA)
│   └── ChatPage/
├── services/         # Сервисы для API, WebSocket, шифрования
├── store/            # State-менеджмент (если используется)
├── styles/           # Глобальные стили, темы
├── utils/            # Вспомогательные функции
└── index.js          # Точка входа
```

## Конфигурация сборки

### webpack.config.js (основные настройки)
- Поддержка современных возможностей JavaScript (ES6+).
- Обработка CSS/SCSS, изображений, шрифтов.
- DevServer с hot reload.
- Оптимизация для продакшена (минификация, разделение кода).

### .eslintrc.json
- Расширенная конфигурация Airbnb или собственная.

### .babelrc
- Пресеты `@babel/preset-env`.

## Развёртывание
1. **GitHub Pages**
   - Клиентская часть должна быть выложена на GitHub Pages.
   - В README.md необходимо разместить бейджик сборки GitHub Action и ссылку на развёрнутое приложение.

2. **GitHub Action**
   - Настроить автоматическую сборку и деплой при пуше в ветку `main` (или `master`).
   - Сборка включает линтинг, тесты (если есть) и создание production-бандла.

3. **Интеграция с backend**
   - Backend разворачивается на Render.
   - Frontend обращается к API по адресу `https://your-app.render.com`.
   - В development-режиме можно использовать proxy для обхода CORS.

## Требования к документации
- Файл `README.md` должен содержать описание всех реализованных функций с иллюстрациями (скриншоты).
- Для каждой функции указано, как ей пользоваться.
- Перечислены все функции, которые были реализованы.

## Тестирование
- Рекомендуется покрыть ключевые компоненты unit-тестами (Jest, Vitest).
- Интеграционные тесты для проверки работы с API.
- E2E-тесты (Cypress, Playwright) для критических сценариев.

---

*Этот документ содержит только frontend-спецификации. Backend-требования описаны в файле `BACKEND.md`.*